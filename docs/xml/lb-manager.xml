<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="lb-manager" kind="page">
    <compoundname>lb-manager</compoundname>
    <title>LB Manager</title>
    <detaileddescription>
<para>Manage load balancers</para><para>The LB manager component <computeroutput><ref refid="structvt_1_1vrt_1_1collection_1_1balance_1_1_l_b_manager" kindref="compound">vt::vrt::collection::balance::LBManager</ref></computeroutput>, accessed via <computeroutput><ref refid="namespacevt_1a05187076eac8c66c9951b062b0955520" kindref="member">vt::theLBManager()</ref></computeroutput> manages and coordinates instances of load balancers. It counts collections as they call <computeroutput>nextPhase</computeroutput> to ensure they are all ready before load balancing begins. It reads the command-line arguments or LB specification file to determine which load balancer to run.</para><para>To enable load balancing, the cmake flag<programlisting><codeline><highlight class="normal">-Dvt_lb_enabled=1</highlight></codeline>
</programlisting> should be passed during building. This also enables automatic instrumentation of work and communication performed by collection elements.</para><para>To run a load balancer at runtime:<itemizedlist>
<listitem><para>Pass <computeroutput>--vt_lb --vt_lb_name=&lt;LB&gt;</computeroutput> as a command line argument</para></listitem><listitem><para>Write a LB specification file <computeroutput>--vt_lb --vt_lb_file --vt_lb_file_name=&lt;FILE&gt;</computeroutput></para></listitem></itemizedlist>
</para><sect1 id="lb-manager_1lb-specification-file">
<title>LB Specification File</title>
<para>The LB specification file allows users to specify which load balancer along with which LB-specific configuration parameters are passed to the load balancer instance for any given phase. The order of the LB phase specficiation lines in the file disambiguates lines<mdash/>higher precedence for earlier lines.</para><para>The format of the LB specification file is:</para><para><programlisting><codeline><highlight class="normal">[%]<sp/>&lt;$phase&gt;<sp/>&lt;$lbname&gt;<sp/>[$LB-specific-arg-1]<sp/>...<sp/>[$LB-specfic-arg-N]</highlight></codeline>
</programlisting></para><para>If a <computeroutput>%</computeroutput> is present, the line matches phases where: <computeroutput>current phase % $phase == 0</computeroutput>. Phase-specific lines (ones that specify a load balancer without a <computeroutput>%</computeroutput>) always always have precedence over <computeroutput>%</computeroutput> lines. The next token after the optional <computeroutput>%</computeroutput> and <computeroutput>$phase</computeroutput> is the name of the load balancer to invoke on that phase. After the load balancer name, <computeroutput>N</computeroutput> arguments to the load balancer are allowed to customize how the load balancer is run with the format of <computeroutput>key=value</computeroutput>. These arguments are the equivalent of passing <computeroutput>--vt_lb_args=&quot;A=test B=test2&quot;</computeroutput> on the command line.</para><para>The following is an example LB specification:</para><para><programlisting><codeline><highlight class="normal">%10<sp/>GossipLB<sp/>c=1<sp/>k=5<sp/>f=2<sp/>i=10</highlight></codeline>
<codeline><highlight class="normal">0<sp/>HierarchicalLB<sp/>min=0.9<sp/>max=1.1<sp/>auto=false</highlight></codeline>
<codeline><highlight class="normal">%<sp/>5<sp/>GreedyLB<sp/>min=1.0</highlight></codeline>
<codeline><highlight class="normal">120<sp/>GreedyLB<sp/>c=0<sp/>k=2<sp/>f=3<sp/>i=3</highlight></codeline>
</programlisting></para></sect1>
<sect1 id="lb-manager_1load-balancers">
<title>Load balancers</title>
<para><table rows="8" cols="4"><row>
<entry thead="yes"><para>Load Balancer </para></entry><entry thead="yes"><para>Type </para></entry><entry thead="yes"><para>Description </para></entry><entry thead="yes"><para>Reference  </para></entry></row>
<row>
<entry thead="no"><para>RotateLB </para></entry><entry thead="no"><para>Testing </para></entry><entry thead="no"><para>Rotate objects in a ring </para></entry><entry thead="no"><para><computeroutput><ref refid="structvt_1_1vrt_1_1collection_1_1lb_1_1_rotate_l_b" kindref="compound">vt::vrt::collection::lb::RotateLB</ref></computeroutput> </para></entry></row>
<row>
<entry thead="no"><para>RandomLB </para></entry><entry thead="no"><para>Testing </para></entry><entry thead="no"><para>Randomly migrate object with seed </para></entry><entry thead="no"><para><computeroutput><ref refid="structvt_1_1vrt_1_1collection_1_1lb_1_1_random_l_b" kindref="compound">vt::vrt::collection::lb::RandomLB</ref></computeroutput> </para></entry></row>
<row>
<entry thead="no"><para>GreedyLB </para></entry><entry thead="no"><para>Centralized </para></entry><entry thead="no"><para>Gather to central node apply min/max heap </para></entry><entry thead="no"><para><computeroutput><ref refid="structvt_1_1vrt_1_1collection_1_1lb_1_1_greedy_l_b" kindref="compound">vt::vrt::collection::lb::GreedyLB</ref></computeroutput> </para></entry></row>
<row>
<entry thead="no"><para>GossipLB </para></entry><entry thead="no"><para>Distributed </para></entry><entry thead="no"><para>Gossip-based protocol for fully distributed LB </para></entry><entry thead="no"><para><computeroutput><ref refid="structvt_1_1vrt_1_1collection_1_1lb_1_1_gossip_l_b" kindref="compound">vt::vrt::collection::lb::GossipLB</ref></computeroutput> </para></entry></row>
<row>
<entry thead="no"><para>HierarchicalLB </para></entry><entry thead="no"><para>Hierarchical </para></entry><entry thead="no"><para>Build tree to move objects nodes </para></entry><entry thead="no"><para><computeroutput><ref refid="structvt_1_1vrt_1_1collection_1_1lb_1_1_hierarchical_l_b" kindref="compound">vt::vrt::collection::lb::HierarchicalLB</ref></computeroutput> </para></entry></row>
<row>
<entry thead="no"><para>ZotltanLB </para></entry><entry thead="no"><para>Hyper-graph Partitioner </para></entry><entry thead="no"><para>Run Zoltan in hyper-graph mode to LB </para></entry><entry thead="no"><para><computeroutput>vt::vrt::collection::lb::ZoltanLB</computeroutput> </para></entry></row>
<row>
<entry thead="no"><para>StatsMapLB </para></entry><entry thead="no"><para>User-specified </para></entry><entry thead="no"><para>Read file to determine mapping </para></entry><entry thead="no"><para><computeroutput><ref refid="structvt_1_1vrt_1_1collection_1_1lb_1_1_stats_map_l_b" kindref="compound">vt::vrt::collection::lb::StatsMapLB</ref></computeroutput> </para></entry></row>
</table>
</para></sect1>
    </detaileddescription>
  </compounddef>
</doxygen>
