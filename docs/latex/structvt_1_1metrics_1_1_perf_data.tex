\hypertarget{structvt_1_1metrics_1_1_perf_data}{}\doxysection{vt\+::metrics\+::Perf\+Data Struct Reference}
\label{structvt_1_1metrics_1_1_perf_data}\index{vt::metrics::PerfData@{vt::metrics::PerfData}}


Tracks performance metrics per task.  




{\ttfamily \#include $<$vt/metrics/perf\+\_\+data.\+h$>$}

Inheritance diagram for vt\+::metrics\+::Perf\+Data\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.439024cm]{structvt_1_1metrics_1_1_perf_data}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_ac85dd22635b503e3d7ba446541ff0131}{Perf\+Data}} ()
\begin{DoxyCompactList}\small\item\em Constructor for \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data}{Perf\+Data}}. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_a8e24902dee849236473c59ac3ba78296}{$\sim$\+Perf\+Data}} ()
\begin{DoxyCompactList}\small\item\em Destructor for \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data}{Perf\+Data}}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_aa49c7f8b14a01ec2b8785f2847fd5250}{start\+Task\+Measurement}} ()
\begin{DoxyCompactList}\small\item\em Start performance measurement for a task. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_ad139793f88ea855b955a6da281984445}{stop\+Task\+Measurement}} ()
\begin{DoxyCompactList}\small\item\em Stop performance measurement for a task. \end{DoxyCompactList}\item 
std\+::unordered\+\_\+map$<$ std\+::string, uint64\+\_\+t $>$ \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_a42e4c61d442e27c425a20ac2b2edb367}{get\+Task\+Measurements}} ()
\begin{DoxyCompactList}\small\item\em Get the measurements collected during the task execution. \end{DoxyCompactList}\item 
std\+::unordered\+\_\+map$<$ std\+::string, std\+::pair$<$ uint64\+\_\+t, uint64\+\_\+t $>$ $>$ \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_a76911046a98371fdd153d9f4a4c1dc4b}{get\+Event\+Map}} () const
\begin{DoxyCompactList}\small\item\em Retrieve the current event map. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_a04c99cc878e634975deffc9a4cef1a23}{startup}} () override
\begin{DoxyCompactList}\small\item\em Component startup method. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_a2812909c74a5c410af0bca6227180aa8}{name}} () override
\begin{DoxyCompactList}\small\item\em Get the component name. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename SerializerT $>$ }\\void \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_a4ead0387e9151e7bd82dffd39d28435a}{serialize}} (SerializerT \&s)
\begin{DoxyCompactList}\small\item\em Serialize the \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data}{Perf\+Data}} object. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_a9a0a867740195b1cf5fd16642c4df5ae}{cleanup\+Before\+Abort}} ()
\begin{DoxyCompactList}\small\item\em Cleanup resources before aborting. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static long \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_a2f4be8557a029b1aea061ed10915707e}{perf\+Event\+Open}} (struct perf\+\_\+event\+\_\+attr $\ast$hw\+\_\+event, pid\+\_\+t pid, int cpu, int group\+\_\+fd, unsigned long flags)
\begin{DoxyCompactList}\small\item\em Open a performance counter event. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::unordered\+\_\+map$<$ std\+::string, std\+::pair$<$ uint64\+\_\+t, uint64\+\_\+t $>$ $>$ \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_a935d0c4d777fdee5aed397eaa62fc919}{event\+\_\+map\+\_\+}}
\begin{DoxyCompactList}\small\item\em Map of event names to event type and configuration. \end{DoxyCompactList}\item 
std\+::vector$<$ std\+::string $>$ \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_a29bdd0701ff8a06864ef2a762554748b}{event\+\_\+names\+\_\+}}
\begin{DoxyCompactList}\small\item\em List of event names being tracked. \end{DoxyCompactList}\item 
std\+::vector$<$ int $>$ \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data_aef2376ecc129b5d8c02249327c8f9248}{event\+\_\+fds\+\_\+}}
\begin{DoxyCompactList}\small\item\em List of file descriptors associated with performance counters. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
Tracks performance metrics per task. 

The \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data}{Perf\+Data}} component is responsible for initializing, tracking, and retrieving performance metrics for specific tasks using Linux performance counters. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_ac85dd22635b503e3d7ba446541ff0131}\label{structvt_1_1metrics_1_1_perf_data_ac85dd22635b503e3d7ba446541ff0131}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!PerfData@{PerfData}}
\index{PerfData@{PerfData}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{PerfData()}{PerfData()}}
{\footnotesize\ttfamily vt\+::metrics\+::\+Perf\+Data\+::\+Perf\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Constructor for \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data}{Perf\+Data}}. 

Initializes performance counters based on the {\ttfamily V\+T\+\_\+\+E\+V\+E\+N\+TS} environment variable, which is a comma seperated list of events available in the events header (\mbox{\hyperlink{example__events_8h}{example\+\_\+events.\+h}} by default). For example\+: {\ttfamily V\+T\+\_\+\+E\+V\+E\+N\+TS=\char`\"{}cache-\/misses,instructions\char`\"{}}. If {\ttfamily V\+T\+\_\+\+E\+V\+E\+N\+TS} isn\textquotesingle{}t set, will default to measuring instructions. Ensures only valid events are configured. \mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_a8e24902dee849236473c59ac3ba78296}\label{structvt_1_1metrics_1_1_perf_data_a8e24902dee849236473c59ac3ba78296}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!````~PerfData@{$\sim$PerfData}}
\index{````~PerfData@{$\sim$PerfData}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{$\sim$PerfData()}{~PerfData()}}
{\footnotesize\ttfamily vt\+::metrics\+::\+Perf\+Data\+::$\sim$\+Perf\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Destructor for \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data}{Perf\+Data}}. 

Cleans up resources, closing file descriptors associated with performance counters. 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_a9a0a867740195b1cf5fd16642c4df5ae}\label{structvt_1_1metrics_1_1_perf_data_a9a0a867740195b1cf5fd16642c4df5ae}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!cleanupBeforeAbort@{cleanupBeforeAbort}}
\index{cleanupBeforeAbort@{cleanupBeforeAbort}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{cleanupBeforeAbort()}{cleanupBeforeAbort()}}
{\footnotesize\ttfamily void vt\+::metrics\+::\+Perf\+Data\+::cleanup\+Before\+Abort (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Cleanup resources before aborting. 

Closes any open file descriptors and clears internal data structures. \mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_a76911046a98371fdd153d9f4a4c1dc4b}\label{structvt_1_1metrics_1_1_perf_data_a76911046a98371fdd153d9f4a4c1dc4b}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!getEventMap@{getEventMap}}
\index{getEventMap@{getEventMap}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{getEventMap()}{getEventMap()}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$ std\+::string, std\+::pair$<$ uint64\+\_\+t, uint64\+\_\+t $>$ $>$ vt\+::metrics\+::\+Perf\+Data\+::get\+Event\+Map (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Retrieve the current event map. 

Returns the mapping of event names to their type and configuration values.

\begin{DoxyReturn}{Returns}
A map of event names to pairs of event type and configuration values. 
\end{DoxyReturn}
\mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_a42e4c61d442e27c425a20ac2b2edb367}\label{structvt_1_1metrics_1_1_perf_data_a42e4c61d442e27c425a20ac2b2edb367}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!getTaskMeasurements@{getTaskMeasurements}}
\index{getTaskMeasurements@{getTaskMeasurements}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{getTaskMeasurements()}{getTaskMeasurements()}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$ std\+::string, uint64\+\_\+t $>$ vt\+::metrics\+::\+Perf\+Data\+::get\+Task\+Measurements (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get the measurements collected during the task execution. 

Reads and retrieves the counter values for all tracked events.

\begin{DoxyReturn}{Returns}
A map of event names to their corresponding measurement values.
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em vt\+Abort} & if there is a mismatch in data or an error during reading. \\
\hline
\end{DoxyExceptions}
\mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_a2812909c74a5c410af0bca6227180aa8}\label{structvt_1_1metrics_1_1_perf_data_a2812909c74a5c410af0bca6227180aa8}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!name@{name}}
\index{name@{name}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{name()}{name()}}
{\footnotesize\ttfamily std\+::string vt\+::metrics\+::\+Perf\+Data\+::name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Get the component name. 

\begin{DoxyReturn}{Returns}
The name of the component as a string. 
\end{DoxyReturn}


Implements \mbox{\hyperlink{structvt_1_1runtime_1_1component_1_1_component_name_a33c06229bb605a2b2ceff68830d6d773}{vt\+::runtime\+::component\+::\+Component\+Name}}.

\mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_a2f4be8557a029b1aea061ed10915707e}\label{structvt_1_1metrics_1_1_perf_data_a2f4be8557a029b1aea061ed10915707e}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!perfEventOpen@{perfEventOpen}}
\index{perfEventOpen@{perfEventOpen}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{perfEventOpen()}{perfEventOpen()}}
{\footnotesize\ttfamily long vt\+::metrics\+::\+Perf\+Data\+::perf\+Event\+Open (\begin{DoxyParamCaption}\item[{struct perf\+\_\+event\+\_\+attr $\ast$}]{hw\+\_\+event,  }\item[{pid\+\_\+t}]{pid,  }\item[{int}]{cpu,  }\item[{int}]{group\+\_\+fd,  }\item[{unsigned long}]{flags }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Open a performance counter event. 

Wrapper around the syscall to open a performance counter.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em hw\+\_\+event} & The performance event attributes. \\
\hline
\mbox{\texttt{ in}}  & {\em pid} & The process ID to measure (-\/1 for calling process). \\
\hline
\mbox{\texttt{ in}}  & {\em cpu} & The C\+PU to measure (-\/1 for any C\+PU). \\
\hline
\mbox{\texttt{ in}}  & {\em group\+\_\+fd} & Group file descriptor for event grouping. \\
\hline
\mbox{\texttt{ in}}  & {\em flags} & Additional flags for the syscall.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The file descriptor for the event, or -\/1 on failure. 
\end{DoxyReturn}
\mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_a4ead0387e9151e7bd82dffd39d28435a}\label{structvt_1_1metrics_1_1_perf_data_a4ead0387e9151e7bd82dffd39d28435a}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!serialize@{serialize}}
\index{serialize@{serialize}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{serialize()}{serialize()}}
{\footnotesize\ttfamily template$<$typename SerializerT $>$ \\
void vt\+::metrics\+::\+Perf\+Data\+::serialize (\begin{DoxyParamCaption}\item[{SerializerT \&}]{s }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Serialize the \mbox{\hyperlink{structvt_1_1metrics_1_1_perf_data}{Perf\+Data}} object. 

\mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_aa49c7f8b14a01ec2b8785f2847fd5250}\label{structvt_1_1metrics_1_1_perf_data_aa49c7f8b14a01ec2b8785f2847fd5250}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!startTaskMeasurement@{startTaskMeasurement}}
\index{startTaskMeasurement@{startTaskMeasurement}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{startTaskMeasurement()}{startTaskMeasurement()}}
{\footnotesize\ttfamily void vt\+::metrics\+::\+Perf\+Data\+::start\+Task\+Measurement (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Start performance measurement for a task. 

Resets and enables the performance counters associated with the tracked events. \mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_a04c99cc878e634975deffc9a4cef1a23}\label{structvt_1_1metrics_1_1_perf_data_a04c99cc878e634975deffc9a4cef1a23}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!startup@{startup}}
\index{startup@{startup}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{startup()}{startup()}}
{\footnotesize\ttfamily void vt\+::metrics\+::\+Perf\+Data\+::startup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Component startup method. 



Reimplemented from \mbox{\hyperlink{structvt_1_1runtime_1_1component_1_1_component_aad3974307ab3b2e1df389a91310f68c2}{vt\+::runtime\+::component\+::\+Component$<$ Perf\+Data $>$}}.

\mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_ad139793f88ea855b955a6da281984445}\label{structvt_1_1metrics_1_1_perf_data_ad139793f88ea855b955a6da281984445}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!stopTaskMeasurement@{stopTaskMeasurement}}
\index{stopTaskMeasurement@{stopTaskMeasurement}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{stopTaskMeasurement()}{stopTaskMeasurement()}}
{\footnotesize\ttfamily void vt\+::metrics\+::\+Perf\+Data\+::stop\+Task\+Measurement (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Stop performance measurement for a task. 

Disables the performance counters associated with the tracked events. 

\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_aef2376ecc129b5d8c02249327c8f9248}\label{structvt_1_1metrics_1_1_perf_data_aef2376ecc129b5d8c02249327c8f9248}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!event\_fds\_@{event\_fds\_}}
\index{event\_fds\_@{event\_fds\_}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{event\_fds\_}{event\_fds\_}}
{\footnotesize\ttfamily std\+::vector$<$int$>$ vt\+::metrics\+::\+Perf\+Data\+::event\+\_\+fds\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



List of file descriptors associated with performance counters. 

\mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_a935d0c4d777fdee5aed397eaa62fc919}\label{structvt_1_1metrics_1_1_perf_data_a935d0c4d777fdee5aed397eaa62fc919}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!event\_map\_@{event\_map\_}}
\index{event\_map\_@{event\_map\_}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{event\_map\_}{event\_map\_}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$std\+::string, std\+::pair$<$uint64\+\_\+t,uint64\+\_\+t$>$ $>$ vt\+::metrics\+::\+Perf\+Data\+::event\+\_\+map\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



Map of event names to event type and configuration. 

\mbox{\Hypertarget{structvt_1_1metrics_1_1_perf_data_a29bdd0701ff8a06864ef2a762554748b}\label{structvt_1_1metrics_1_1_perf_data_a29bdd0701ff8a06864ef2a762554748b}} 
\index{vt::metrics::PerfData@{vt::metrics::PerfData}!event\_names\_@{event\_names\_}}
\index{event\_names\_@{event\_names\_}!vt::metrics::PerfData@{vt::metrics::PerfData}}
\doxysubsubsection{\texorpdfstring{event\_names\_}{event\_names\_}}
{\footnotesize\ttfamily std\+::vector$<$std\+::string$>$ vt\+::metrics\+::\+Perf\+Data\+::event\+\_\+names\+\_\+\hspace{0.3cm}{\ttfamily [private]}}



List of event names being tracked. 



The documentation for this struct was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/vt/metrics/\mbox{\hyperlink{perf__data_8h}{perf\+\_\+data.\+h}}\item 
src/vt/metrics/\mbox{\hyperlink{perf__data_8cc}{perf\+\_\+data.\+cc}}\end{DoxyCompactItemize}
