<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>vt::collective::CollectiveScope struct | vt (Virtual Transport)</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">vt <span class="m-thin">(Virtual Transport)</span></a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li>
              <a href="introduction.html">Introduction</a>
              <ol>
                <li><a href="context.html">Context</a></li>
                <li><a href="active-messenger.html">Active Messenger</a></li>
                <li><a href="collection.html">Virtual Context Collection</a></li>
                <li><a href="collective.html">Collectives</a></li>
                <li><a href="group.html">Group Manager</a></li>
                <li><a href="location.html">Location Manager</a></li>
                <li><a href="objgroup.html">Object Group Manager</a></li>
                <li><a href="pipe.html">Pipe Manager</a></li>
                <li><a href="pool.html">Memory Pool</a></li>
                <li><a href="rdmahandle.html">RDMA Handle Manager</a></li>
                <li><a href="registry.html">Registry</a></li>
                <li><a href="scheduler.html">Scheduler</a></li>
                <li><a href="term.html">Termination Detector</a></li>
                <li><a href="trace.html">Tracing</a></li>
                <li><a href="trace-only.html">Trace-only</a></li>
              </ol>
            </li>
            <li>
              <a href="learn.html">Learn</a>
              <ol>
                <li><a href="vt-build.html">How to Build</a></li>
                <li><a href="tutorial.html">Tutorial</a></li>
                <li><a href="examples.html">Examples</a></li>
                <li><a href="ckpt_learn_serialize.html">How to Serialize Data</a></li>
              </ol>
            </li>
            <li><a href="pages.html">Pages</a></li>
            <li>
              <a href="namespaces.html">Namespaces</a>
              <ol>
                <li><a href="namespacevt.html">vt</a></li>
                <li><a href="namespacevt_1_1collective.html">vt::collective</a></li>
                <li><a href="namespacevt_1_1debug.html">vt::debug</a></li>
                <li><a href="namespacevt_1_1group.html">vt::group</a></li>
                <li><a href="namespacevt_1_1location.html">vt::location</a></li>
                <li><a href="namespacevt_1_1messaging.html">vt::messaging</a></li>
                <li><a href="namespacevt_1_1objgroup.html">vt::objgroup</a></li>
                <li><a href="namespacevt_1_1pipe.html">vt::pipe</a></li>
                <li><a href="namespacevt_1_1rdma.html">vt::rdma</a></li>
                <li><a href="namespacevt_1_1runtime.html">vt::runtime</a></li>
                <li><a href="namespacevt_1_1term.html">vt::term</a></li>
                <li><a href="namespacevt_1_1vrt.html">vt::vrt</a></li>
              </ol>
            </li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="5">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li>
              <a href="https://github.com/DARMA-tasking/vt">GitHub</a>
              <ol>
                <li><a href="https://github.com/DARMA-tasking/checkpoint">Checkpoint</a></li>
                <li><a href="https://github.com/DARMA-tasking/LB-analysis-framework">LBAF</a></li>
                <li><a href="https://github.com/DARMA-tasking/checkpoint-member-analyzer">Checkpoint Analyzer</a></li>
                <li><a href="https://github.com/DARMA-tasking/DARMA-tasking.github.io">Documentation</a></li>
              </ol>
            </li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespacevt.html">vt</a>::<wbr/></span><span class="m-breadcrumb"><a href="namespacevt_1_1collective.html">collective</a>::<wbr/></span>CollectiveScope <span class="m-thin">struct</span>
          <div class="m-doc-include m-code m-inverted m-text-right"><span class="cp">#include</span> <a class="cpf" href="collective__scope_8h.html">&lt;src/vt/collective/collective_scope.h&gt;</a></div>
        </h1>
        <p>A distinct scope for enqueuing ordered collective operations.</p>
        <nav class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
              </ul>
            </li>
          </ul>
        </nav>
<p>Each collective scope builds an individual sequence of collective operations that get orchestrated across nodes using a consensus algorithm so all nodes agree on a particular operation to execute in the sequence.</p><p>An example use case is running a blocking MPI collective (like a <code>*</code> MPI_Allreduce) inside VT handlers without causing progress to halt due to asynchrony in VT.</p>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt id="aef18868ea87dbbf5647c5575f86903a7">
              <span class="m-doc-wrap-bumper"><a href="#aef18868ea87dbbf5647c5575f86903a7" class="m-doc-self">CollectiveScope</a>(</span><span class="m-doc-wrap"><a href="structvt_1_1collective_1_1_collective_scope.html" class="m-doc">CollectiveScope</a>&amp;&amp; other)</span>
            </dt>
            <dd><span></span></dd>
            <dt id="a9781b1b86796d271cc9407eb8034851f">
              <span class="m-doc-wrap-bumper"><a href="#a9781b1b86796d271cc9407eb8034851f" class="m-doc-self">CollectiveScope</a>(</span><span class="m-doc-wrap"><a href="structvt_1_1collective_1_1_collective_scope.html" class="m-doc">CollectiveScope</a> const&amp;) <span class="m-label m-flat m-danger">deleted</span></span>
            </dt>
            <dd><span></span></dd>
            <dt id="a0b8d9664cdc7f94bed4b17e0eb5c2b77">
              <span class="m-doc-wrap-bumper"><a href="#a0b8d9664cdc7f94bed4b17e0eb5c2b77" class="m-doc-self">~CollectiveScope</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd><span></span></dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt id="a4a756e93437119e20a72dfe0d9ede190">
              <span class="m-doc-wrap-bumper">auto <a href="#a4a756e93437119e20a72dfe0d9ede190" class="m-doc-self">operator=</a>(</span><span class="m-doc-wrap"><a href="structvt_1_1collective_1_1_collective_scope.html" class="m-doc">CollectiveScope</a>&amp;&amp;) -&gt; <a href="structvt_1_1collective_1_1_collective_scope.html" class="m-doc">CollectiveScope</a>&amp; <span class="m-label m-flat m-danger">deleted</span></span>
            </dt>
            <dd><span></span></dd>
            <dt id="ae211d02b75ae45834e25eb1cd8c2f7d0">
              <span class="m-doc-wrap-bumper">auto <a href="#ae211d02b75ae45834e25eb1cd8c2f7d0" class="m-doc-self">operator=</a>(</span><span class="m-doc-wrap"><a href="structvt_1_1collective_1_1_collective_scope.html" class="m-doc">CollectiveScope</a> const&amp;) -&gt; <a href="structvt_1_1collective_1_1_collective_scope.html" class="m-doc">CollectiveScope</a>&amp; <span class="m-label m-flat m-danger">deleted</span></span>
            </dt>
            <dd><span></span></dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ad116d0b00f28b79dbf7c4b0e5c4ed4a1" class="m-doc">mpiCollectiveAsync</a>(</span><span class="m-doc-wrap"><a href="namespacevt.html#ae0a5a7b18cc99d7b732cb4d44f46b0f3" class="m-doc">ActionType</a> action) -&gt; <a href="namespacevt.html#a84ab281dae04a52a4b243d6bf62d0e52" class="m-doc">TagType</a></span>
            </dt>
            <dd>Enqueue a lambda with an embedded closed set of MPI operations (including collectives) to execute in the future. Returns immediately, enqueuing the action for the future.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#acc386201ec9e82dbe2691b4ce528a4c2" class="m-doc">isCollectiveDone</a>(</span><span class="m-doc-wrap"><a href="namespacevt.html#a84ab281dae04a52a4b243d6bf62d0e52" class="m-doc">TagType</a> tag) -&gt; bool</span>
            </dt>
            <dd>Query whether an enqueued MPI operation set is complete.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#afae2807ff3adc0f1d6772411168064f9" class="m-doc">waitCollective</a>(</span><span class="m-doc-wrap"><a href="namespacevt.html#a84ab281dae04a52a4b243d6bf62d0e52" class="m-doc">TagType</a> tag)</span>
            </dt>
            <dd>Wait on an MPI operation set to complete.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a0ef41233afe63fc9ead8431e226af193" class="m-doc">mpiCollectiveWait</a>(</span><span class="m-doc-wrap"><a href="namespacevt.html#ae0a5a7b18cc99d7b732cb4d44f46b0f3" class="m-doc">ActionType</a> action)</span>
            </dt>
            <dd>Enqueue a lambda with an embedded closed set of MPI operations (including collectives). Spin in the VT scheduler until it terminates.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a8f8aa109ef27449f8fcb5eb378587196" class="m-doc">isUserTag</a>(</span><span class="m-doc-wrap">) const -&gt; bool</span>
            </dt>
            <dd>Get whether this scope is a user-tagged scope.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#abed60df0901f32a362a908dccdcbe0fb" class="m-doc">getScopeBits</a>(</span><span class="m-doc-wrap">) const -&gt; <a href="namespacevt.html#a84ab281dae04a52a4b243d6bf62d0e52" class="m-doc">TagType</a></span>
            </dt>
            <dd>Get the scope tag bits.</dd>
            <dt id="aad6692a59ad1c0b3d87de4a7f67e9d8a">
              <div class="m-doc-template">template&lt;typename Serializer&gt;</div>
              <span class="m-doc-wrap-bumper">void <a href="#aad6692a59ad1c0b3d87de4a7f67e9d8a" class="m-doc-self">serialize</a>(</span><span class="m-doc-wrap">Serializer&amp; s)</span>
            </dt>
            <dd><span></span></dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="ad116d0b00f28b79dbf7c4b0e5c4ed4a1"><div>
            <h3>
              <span class="m-doc-wrap-bumper"><a href="namespacevt.html#a84ab281dae04a52a4b243d6bf62d0e52" class="m-doc">TagType</a> vt::<wbr />collective::<wbr />CollectiveScope::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ad116d0b00f28b79dbf7c4b0e5c4ed4a1" class="m-doc-self">mpiCollectiveAsync</a>(</span><span class="m-doc-wrap"><a href="namespacevt.html#ae0a5a7b18cc99d7b732cb4d44f46b0f3" class="m-doc">ActionType</a> action)</span></span>
            </h3>
            <p>Enqueue a lambda with an embedded closed set of MPI operations (including collectives) to execute in the future. Returns immediately, enqueuing the action for the future.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">action&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the action containing a closed set of MPI operations</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>tag representing the operation set</td>
                </tr>
              </tfoot>
            </table>
<p>The set of operations specified in the lambda must be closed, meaning that MPI requests must not escape the lambda. After the lambda finishes, the set of MPI collective calls should be complete.</p><p>Any buffers captured in the lambda to use with the MPI operations are in use until <code>isCollectiveDone</code> returns <code>true</code> or <code>waitCollective</code> returns on the returned <code>TagType</code></p><p>The operation is counted as activity in the active termination detection epoch</p>
          </div></section>
          <section class="m-doc-details" id="acc386201ec9e82dbe2691b4ce528a4c2"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool vt::<wbr />collective::<wbr />CollectiveScope::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#acc386201ec9e82dbe2691b4ce528a4c2" class="m-doc-self">isCollectiveDone</a>(</span><span class="m-doc-wrap"><a href="namespacevt.html#a84ab281dae04a52a4b243d6bf62d0e52" class="m-doc">TagType</a> tag)</span></span>
            </h3>
            <p>Query whether an enqueued MPI operation set is complete.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">tag&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>MPI operation set identifier</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>whether it has finished or not</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="afae2807ff3adc0f1d6772411168064f9"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void vt::<wbr />collective::<wbr />CollectiveScope::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#afae2807ff3adc0f1d6772411168064f9" class="m-doc-self">waitCollective</a>(</span><span class="m-doc-wrap"><a href="namespacevt.html#a84ab281dae04a52a4b243d6bf62d0e52" class="m-doc">TagType</a> tag)</span></span>
            </h3>
            <p>Wait on an MPI operation set to complete.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">tag&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>MPI collective set identifier</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a0ef41233afe63fc9ead8431e226af193"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void vt::<wbr />collective::<wbr />CollectiveScope::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a0ef41233afe63fc9ead8431e226af193" class="m-doc-self">mpiCollectiveWait</a>(</span><span class="m-doc-wrap"><a href="namespacevt.html#ae0a5a7b18cc99d7b732cb4d44f46b0f3" class="m-doc">ActionType</a> action)</span></span>
            </h3>
            <p>Enqueue a lambda with an embedded closed set of MPI operations (including collectives). Spin in the VT scheduler until it terminates.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">action&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>the action containing a set of MPI operations</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a8f8aa109ef27449f8fcb5eb378587196"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool vt::<wbr />collective::<wbr />CollectiveScope::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a8f8aa109ef27449f8fcb5eb378587196" class="m-doc-self">isUserTag</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <p>Get whether this scope is a user-tagged scope.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>whether this scope is a user tag</td>
                </tr>
              </tfoot>
            </table>
<aside class="m-note m-info"><h4>Note</h4><p>Used for testing purposes</p></aside>
          </div></section>
          <section class="m-doc-details" id="abed60df0901f32a362a908dccdcbe0fb"><div>
            <h3>
              <span class="m-doc-wrap-bumper"><a href="namespacevt.html#a84ab281dae04a52a4b243d6bf62d0e52" class="m-doc">TagType</a> vt::<wbr />collective::<wbr />CollectiveScope::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#abed60df0901f32a362a908dccdcbe0fb" class="m-doc-self">getScopeBits</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <p>Get the scope tag bits.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>the scope bits</td>
                </tr>
              </tfoot>
            </table>
<aside class="m-note m-info"><h4>Note</h4><p>Used for testing purposes</p></aside>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>vt (Virtual Transport). Created with <a href="https://doxygen.org/">Doxygen</a> 1.8.16 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
