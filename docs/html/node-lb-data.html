<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Introduction &raquo; Node LB Data | vt (Virtual Transport)</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">vt <span class="m-thin">(Virtual Transport)</span></a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li>
              <a href="introduction.html">Introduction</a>
              <ol>
                <li><a href="context.html">Context</a></li>
                <li><a href="active-messenger.html">Active Messenger</a></li>
                <li><a href="collection.html">Virtual Context Collection</a></li>
                <li><a href="collective.html">Collectives</a></li>
                <li><a href="group.html">Group Manager</a></li>
                <li><a href="location.html">Location Manager</a></li>
                <li><a href="objgroup.html">Object Group Manager</a></li>
                <li><a href="pipe.html">Pipe Manager</a></li>
                <li><a href="pool.html">Memory Pool</a></li>
                <li><a href="rdmahandle.html">RDMA Handle Manager</a></li>
                <li><a href="registry.html">Registry</a></li>
                <li><a href="scheduler.html">Scheduler</a></li>
                <li><a href="term.html">Termination Detector</a></li>
                <li><a href="trace.html">Tracing</a></li>
                <li><a href="trace-only.html">Trace-only</a></li>
              </ol>
            </li>
            <li>
              <a href="learn.html">Learn</a>
              <ol>
                <li><a href="vt-build.html">How to Build</a></li>
                <li><a href="tutorial.html">Tutorial</a></li>
                <li><a href="examples.html">Examples</a></li>
                <li><a href="ckpt_learn_serialize.html">How to Serialize Data</a></li>
              </ol>
            </li>
            <li><a href="pages.html">Pages</a></li>
            <li>
              <a href="namespaces.html">Namespaces</a>
              <ol>
                <li><a href="namespacevt.html">vt</a></li>
                <li><a href="namespacevt_1_1collective.html">vt::collective</a></li>
                <li><a href="namespacevt_1_1debug.html">vt::debug</a></li>
                <li><a href="namespacevt_1_1group.html">vt::group</a></li>
                <li><a href="namespacevt_1_1location.html">vt::location</a></li>
                <li><a href="namespacevt_1_1messaging.html">vt::messaging</a></li>
                <li><a href="namespacevt_1_1objgroup.html">vt::objgroup</a></li>
                <li><a href="namespacevt_1_1pipe.html">vt::pipe</a></li>
                <li><a href="namespacevt_1_1rdma.html">vt::rdma</a></li>
                <li><a href="namespacevt_1_1runtime.html">vt::runtime</a></li>
                <li><a href="namespacevt_1_1term.html">vt::term</a></li>
                <li><a href="namespacevt_1_1vrt.html">vt::vrt</a></li>
              </ol>
            </li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="5">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li>
              <a href="https://github.com/DARMA-tasking/vt">GitHub</a>
              <ol>
                <li><a href="https://github.com/DARMA-tasking/checkpoint">Checkpoint</a></li>
                <li><a href="https://github.com/DARMA-tasking/LB-analysis-framework">LBAF</a></li>
                <li><a href="https://github.com/DARMA-tasking/checkpoint-member-analyzer">Checkpoint Analyzer</a></li>
                <li><a href="https://github.com/DARMA-tasking/DARMA-tasking.github.io">Documentation</a></li>
              </ol>
            </li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="introduction.html">Introduction</a> &raquo;</span>
          Node LB Data
        </h1>
        <p>Manager object profiling data.</p>
<p>The node LB data manager component <code><a href="structvt_1_1vrt_1_1collection_1_1balance_1_1_node_l_b_data.html" class="m-doc">vt::<wbr />vrt::<wbr />collection::<wbr />balance::<wbr />NodeLBData</a></code>, accessed via <code><a href="namespacevt.html#af2ddfbdc455e98a0d46732522d8cf589" class="m-doc">vt::<wbr />theNodeLBData()</a></code> manages instrumentation data from objects in a collection. It holds data per node on the timing of these objects and communication between them demarcated by phase and subphase.</p><p>When LB is invoked in <strong><em>vt</em></strong>, the <a href="lb-manager.html" class="m-doc">LB Manager</a> passes the node LB data to the various LB strategies to run the load balancer. The node LB data component can also dump the LB data it holds to files, which can be read externally. The LBAF (Load Balancing Analysis Framework) can also then read this data to analyze the quality of the load distribution at any phase in the file.</p><section id="export-lb-data-file"><h2><a href="#export-lb-data-file">Exporting LB Data Files (VOM)</a></h2><p>The <code>NodeLBData</code> component, after collecting LB data from the running program, can dump these to files in a VOM file (Virtual Object Map). As indicated by the name, the VOM file specifies the mapping of object to node for each phase along with LB data for each object (computation time and communication load).</p><p>To output VOM files, pass <code>--vt_lb_data</code> to enable output along with <code>--vt_lb_data_dir=&lt;my-directory&gt;</code> and <code>--vt_lb_data_file=&lt;my-base-name&gt;</code> to control the directory the files are generated along with the base file name. With this enabled, <strong><em>vt</em></strong> will generate a file for each node that contains the LB data and mapping.</p><section id="lb-data-file-format"><h3><a href="#lb-data-file-format">File Format</a></h3><p>The VOM files are output in JSON format, either compressed with brotli compression (default on) or pure JSON if the argument <code>--vt_lb_data_compress</code> is set to <code>false</code>.</p><p>The JSON files contain an array of <code>phases</code> that have been captured by <strong><em>vt</em></strong> and output to the file. Each phase has an <code>id</code> indicating which phase it was while the application was running. Each phase also has an array of <code>tasks</code> that represent work that was done during that phase. Each task has a <code>time</code>, <code>resource</code>, <code>node</code>, <code>entity</code>, and optionally a list of <code>subphases</code>. The <code>entity</code> contains information about the task that performed this work. If that <code>entity</code> is a virtual collection object, it will specify the unique <code>id</code> for the object, and optionally the <code>index</code>, <code>home</code>, and <code>collection_id</code> for that object.</p><pre class="m-code"><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;phases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;identical_to_previous&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">                </span><span class="nt">&quot;range&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;skipped&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">                </span><span class="nt">&quot;range&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;rank&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;shared_node&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;num_nodes&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;rank&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;LBDatafile&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;phases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;communications&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;bytes&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">160.0</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;collection_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;home&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">262147</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                            </span><span class="mi">0</span>
<span class="w">                        </span><span class="p">],</span>
<span class="w">                        </span><span class="nt">&quot;migratable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;messages&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;collection_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;home&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">262147</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                            </span><span class="mi">0</span>
<span class="w">                        </span><span class="p">],</span>
<span class="w">                        </span><span class="nt">&quot;migratable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SendRecv&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;tasks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;entity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;collection_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;home&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">262147</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                            </span><span class="mi">0</span>
<span class="w">                        </span><span class="p">],</span>
<span class="w">                        </span><span class="nt">&quot;migratable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;node&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;subphases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0003119999999999999</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0003119999999999999</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;entity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;home&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3145740</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;migratable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;objgroup_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">786435</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;node&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;entity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;home&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4194316</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;migratable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;objgroup_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1048579</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;node&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;entity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;home&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;migratable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;node&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;subphases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">9.000000000000002e-06</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">9.000000000000002e-06</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;entity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;home&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;migratable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;node&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span></pre><p>Each phase in the file may also have a <code>communications</code> array that specify any communication between tasks that occurred during the phase. Each communication has <code>type</code>, which is described below in the following table. Additionally, it specifies the <code>bytes</code>, number of <code>messages</code>, and the two entities that were involved in the operator as <code>to</code> and <code>from</code>. The entities may be of different types, like an <code>object</code> or <code>node</code> depending on the type of communication.</p><pre class="m-code"><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;phases&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;communications&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;bytes&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1456.0</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;home&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;migratable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;messages&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;home&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;migratable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SendRecv&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;bytes&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1456.0</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;home&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;migratable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;messages&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;home&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;migratable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SendRecv&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span></pre><p>The type of communication lines up with the enum <code>vt::vrt::collection::balance::CommCategory</code> in the code.</p><table class="m-table"><thead><tr><th>Value</th><th>Enum entry</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td><code>CommCategory::SendRecv</code></td><td>A send-receive edge between two collection elements</td></tr><tr><td>2</td><td><code>CommCategory::CollectionToNode</code></td><td>A send from a collection element to a node</td></tr><tr><td>3</td><td><code>CommCategory::NodeToCollection</code></td><td>A send from a node to a collection element</td></tr><tr><td>4</td><td><code>CommCategory::Broadcast</code></td><td>A broadcast from a collection element to a whole collection (receive-side)</td></tr><tr><td>5</td><td><code>CommCategory::CollectionToNodeBcast</code></td><td>A broadcast from a collection element to all nodes (receive-side)</td></tr><tr><td>6</td><td><code>CommCategory::NodeToCollectionBcast</code></td><td>A broadcast from a node to a whole collection (receive-side)</td></tr><tr><td>7</td><td><code>CommCategory::CollectiveToCollectionBcast</code></td><td>Collective &#x27;broadcast&#x27; from every node to the local collection elements (receive-side)</td></tr></tbody></table><p>For all the broadcast-like edges, the communication logging will occur on the receive of the broadcast side (one entry per broadcast recipient).</p></section></section><section id="lb-data-file-validator"><h2><a href="#lb-data-file-validator">LB Data File Validator</a></h2><p>All input JSON files will be validated using the <code>JSON_data_files_validator.py</code> found in the <code>scripts</code> directory, which ensures that a given JSON adheres to the following schema:</p><pre class="m-code"><span class="kn">from</span> <span class="nn">schema</span> <span class="kn">import</span> <span class="n">And</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Schema</span>

<span class="k">def</span> <span class="nf">validate_ids</span><span class="p">(</span><span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensure that 1) either seq_id or id is provided,</span>
<span class="sd">    and 2) if an object is migratable, collection_id has been set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;seq_id&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">field</span> <span class="ow">and</span> <span class="s1">&#39;id&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">field</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Either id (bit-encoded) or seq_id must be provided.&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;migratable&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="s1">&#39;seq_id&#39;</span> <span class="ow">in</span> <span class="n">field</span> <span class="ow">and</span> <span class="s1">&#39;collection_id&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">field</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;If an entity is migratable, it must have a collection_id&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">field</span>

<span class="n">task</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;entity&#39;</span><span class="p">:</span> <span class="n">And</span><span class="p">({</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;collection_id&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s1">&#39;home&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;seq_id&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">):</span> <span class="p">[</span><span class="nb">int</span><span class="p">],</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="s1">&#39;migratable&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;objgroup_id&#39;</span><span class="p">):</span> <span class="nb">int</span>
    <span class="p">},</span> <span class="n">validate_ids</span><span class="p">),</span>
    <span class="s1">&#39;node&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="s1">&#39;resource&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;subphases&#39;</span><span class="p">):</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;user_defined&#39;</span><span class="p">):</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;attributes&#39;</span><span class="p">):</span> <span class="nb">dict</span>
<span class="p">}</span>

<span class="n">communication</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="n">And</span><span class="p">({</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;seq_id&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;collection_id&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;migratable&#39;</span><span class="p">):</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">):</span> <span class="p">[</span><span class="nb">int</span><span class="p">],</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;objgroup_id&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">},</span> <span class="n">validate_ids</span><span class="p">),</span>
    <span class="s1">&#39;messages&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">And</span><span class="p">({</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;seq_id&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;collection_id&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;migratable&#39;</span><span class="p">):</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">):</span> <span class="p">[</span><span class="nb">int</span><span class="p">],</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;objgroup_id&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">},</span> <span class="n">validate_ids</span><span class="p">),</span>
    <span class="s1">&#39;bytes&#39;</span><span class="p">:</span> <span class="nb">float</span>
<span class="p">}</span>

<span class="n">LBDatafile_schema</span> <span class="o">=</span> <span class="n">Schema</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">):</span> <span class="n">And</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;LBDatafile&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s2">&quot;&#39;LBDatafile&#39; must be chosen.&quot;</span><span class="p">),</span>
        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">):</span> <span class="p">{</span>
            <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">):</span> <span class="n">And</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;LBDatafile&quot;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="s2">&quot;&#39;LBDatafile&#39; must be chosen.&quot;</span><span class="p">),</span>
            <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;rank&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
            <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;shared_node&#39;</span><span class="p">):</span> <span class="p">{</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s1">&#39;rank&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s1">&#39;num_nodes&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;phases&#39;</span><span class="p">):</span> <span class="p">{</span>
                <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">):</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s1">&#39;skipped&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;list&#39;</span><span class="p">:</span> <span class="p">[</span><span class="nb">int</span><span class="p">],</span>
                    <span class="s1">&#39;range&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="nb">int</span><span class="p">]],</span>
                <span class="p">},</span>
                <span class="s1">&#39;identical_to_previous&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;list&#39;</span><span class="p">:</span> <span class="p">[</span><span class="nb">int</span><span class="p">],</span>
                    <span class="s1">&#39;range&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="nb">int</span><span class="p">]],</span>
                <span class="p">},</span>
            <span class="p">},</span>
            <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;attributes&#39;</span><span class="p">):</span> <span class="nb">dict</span>
        <span class="p">},</span>
        <span class="s1">&#39;phases&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                <span class="s1">&#39;tasks&#39;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="n">task</span>
                <span class="p">],</span>
                <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;communications&#39;</span><span class="p">):</span> <span class="p">[</span>
                    <span class="n">communication</span>
                <span class="p">],</span>
                <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;user_defined&#39;</span><span class="p">):</span> <span class="nb">dict</span><span class="p">,</span>
                <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;lb_iterations&#39;</span><span class="p">):</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                        <span class="s1">&#39;tasks&#39;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="n">task</span>
                        <span class="p">],</span>
                        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;communications&#39;</span><span class="p">):</span> <span class="p">[</span>
                            <span class="n">communication</span>
                        <span class="p">],</span>
                        <span class="n">Optional</span><span class="p">(</span><span class="s1">&#39;user_defined&#39;</span><span class="p">):</span> <span class="nb">dict</span>
                    <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">},</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">)</span></pre></section><section id="lb-spec-file"><h2><a href="#lb-spec-file">LB Specification File</a></h2><p>In order to customize when LB output is enabled and disabled, a LB specification file can be passed to <strong><em>vt</em></strong> via a command-line flag: <code>--vt_lb_spec --vt_lb_spec_file=filename.spec</code>.</p><p>For details about vt&#x27;s Specification File see <a href="spec-file.html" class="m-doc">Spec File</a></p></section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>vt (Virtual Transport). Created with <a href="https://doxygen.org/">Doxygen</a> 1.8.16 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
